(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78535,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return d.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let d=e.r(67950),o=e.r(99407),i=e.r(50064)},16925,e=>{"use strict";var t=e.i(27204),r=e.i(46286),a=e.i(3630);let s=(0,e.i(98631).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),d=[{id:"desktop",label:"Desktop",width:"100%",height:780},{id:"tablet",label:"Tablet",width:820,height:1180},{id:"mobile",label:"Mobile",width:390,height:844},{id:"square",label:"Square",width:800,height:800}];function o({catalogSlug:e,layoutOverrides:a,currencyOverrides:s}){let[o,i]=(0,r.useState)("desktop"),n=(0,r.useMemo)(()=>d.find(e=>e.id===o),[o]),l=n?.width??d[0].width,c=n?.height??d[0].height,u={width:"number"==typeof l?`${l}px`:l,height:`${c}px`},m=(0,r.useMemo)(()=>{let t=new URLSearchParams;return t.set("preview","1"),a?.headerVariant&&t.set("header",a.headerVariant),a?.sectionVariant&&t.set("section",a.sectionVariant),a?.itemCardVariant&&t.set("card",a.itemCardVariant),a?.categoryNavVariant&&t.set("nav",a.categoryNavVariant),a?.itemDetailVariant&&t.set("detail",a.itemDetailVariant),a?.itemCard?.columns&&t.set("cols",String(a.itemCard.columns)),a?.itemCard?.aspectRatio&&t.set("ratio",String(a.itemCard.aspectRatio)),s&&(t.set("cur",s.defaultCurrency),t.set("curLabel",s.label),t.set("curThousand",s.thousandSeparator),t.set("curDecimal",s.decimalSeparator),t.set("curDecimals",s.showDecimals?"1":"0"),t.set("curPos",s.labelPosition)),`/preview/${e}?${t.toString()}`},[e,a,s]);return(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[d.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>i(e.id),className:["rounded-full border px-3 py-1 text-xs transition",o===e.id?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground hover:text-foreground"].join(" "),children:e.label},e.id)),(0,t.jsxs)("span",{className:"ml-auto text-xs text-muted-foreground",children:["number"==typeof l?`${l}px`:l," Ã— ",c,"px"]})]}),(0,t.jsx)("div",{className:"rounded-xl border border-dashed border-border bg-secondary-background/40 p-4",children:(0,t.jsx)("div",{className:"w-full overflow-auto",children:(0,t.jsx)("div",{className:"mx-auto overflow-hidden rounded-lg border border-border bg-background shadow-sm",style:u,children:(0,t.jsx)("iframe",{title:"Catalog preview",src:m,className:"h-full w-full",loading:"lazy",sandbox:"allow-same-origin allow-scripts allow-forms"})})})})]})}var i=e.i(9235),n=e.i(54219);let l=null,c=!1;async function u(){if(!c&&(c=!0,!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches))try{l=(await e.A(49631)).triggerHaptic}catch{}}async function m(e=40){await u(),l?.(e)}async function x(){await m(70)}async function g(){await m(90)}var b=e.i(78535);let p=(0,b.createServerReference)("40f004e0f0cb0bd60f0648085f8ad2f288c4e6b215",b.callServer,void 0,b.findSourceMapURL,"saveCatalogLayout"),h=[{width:1,height:1},{width:4,height:3},{width:3,height:4},{width:16,height:9},{width:9,height:16}];function f({catalogId:e,catalogSlug:d,initialLayout:l,initialCurrency:c,headerOptions:u,sectionOptions:m,itemCardOptions:b,itemDetailOptions:f,navOptions:j}){let N=(0,r.useMemo)(()=>(function(e){let t=Number.isFinite(e)&&e>0?e:1,r=h[0],a=1/0;for(let e of h){let s=Math.abs(e.width/e.height-t);s<a&&(a=s,r=e)}return a<=.02?r:{width:Number(t.toFixed(2)),height:1}})(l.itemCard.aspectRatio),[l.itemCard.aspectRatio]),[y,w]=(0,r.useState)(l.headerVariant),[S,C]=(0,r.useState)(l.sectionVariant),[k,M]=(0,r.useState)(l.itemCardVariant),[D,P]=(0,r.useState)(l.categoryNavVariant),[V,L]=(0,r.useState)(l.itemDetailVariant),[R,F]=(0,r.useState)(l.itemCard.columns),[T,U]=(0,r.useState)(N.width),[$,O]=(0,r.useState)(N.height),[_,B]=(0,r.useState)(c.defaultCurrency),[z,A]=(0,r.useState)(c.label),[H,I]=(0,r.useState)(c.thousandSeparator),[q,K]=(0,r.useState)(c.decimalSeparator),[E,G]=(0,r.useState)(c.showDecimals),[J,Q]=(0,r.useState)(c.labelPosition),[W,X]=(0,r.useState)(!1),Y=(0,r.useMemo)(()=>(Number.isFinite(T)&&T>0?T:1)/(Number.isFinite($)&&$>0?$:1),[T,$]),Z=(0,r.useMemo)(()=>({headerVariant:y,sectionVariant:S,itemCardVariant:k,categoryNavVariant:D,itemDetailVariant:V,itemCard:{columns:R,aspectRatio:Y}}),[y,S,k,D,V,R,Y]),ee=(0,r.useMemo)(()=>({defaultCurrency:_,label:z,thousandSeparator:H,decimalSeparator:q,showDecimals:E,labelPosition:J}),[_,z,H,q,E,J]),et=(0,r.useMemo)(()=>{let e=new URLSearchParams;return e.set("preview","1"),e.set("header",y),e.set("section",S),e.set("card",k),e.set("nav",D),e.set("detail",V),e.set("cols",String(R)),e.set("ratio",String(Y)),e.set("cur",_),e.set("curLabel",z),e.set("curThousand",H),e.set("curDecimal",q),e.set("curDecimals",E?"1":"0"),e.set("curPos",J),`/preview/${d}?${e.toString()}`},[d,y,S,k,D,V,R,Y,_,z,H,q,E,J]),er=async()=>{if(W)return;X(!0);let t={...l,headerVariant:y,sectionVariant:S,itemCardVariant:k,categoryNavVariant:D,itemDetailVariant:V,itemCard:{columns:R,aspectRatio:Y}},r={...c,defaultCurrency:_,label:z,thousandSeparator:H,decimalSeparator:q,showDecimals:E,labelPosition:J},a=await p({catalogId:e,catalogSlug:d,settingsLayout:t,settingsCurrency:r});a.ok?(n.toast.success("Layout saved"),x()):(n.toast.error("Failed to save layout",{description:a.error??"Unknown error"}),g()),X(!1)};return(0,t.jsxs)("div",{className:"mt-8 grid gap-6 lg:grid-cols-[380px_1fr]",children:[(0,t.jsxs)("aside",{className:"space-y-6",children:[(0,t.jsx)(v,{title:"Headers",description:"Top branding and catalog identity.",options:u,selected:y,onSelect:w}),(0,t.jsx)(v,{title:"Sections",description:"Category grouping and spacing.",options:m,selected:S,onSelect:C}),(0,t.jsx)(v,{title:"Item Cards",description:"How each item is rendered.",options:b,selected:k,onSelect:M}),(0,t.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",children:"Item Card Layout"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Columns and image aspect ratio."}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,t.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Columns",(0,t.jsx)("input",{type:"number",min:1,max:4,step:1,value:R,onChange:e=>{let t=Number(e.target.value);Number.isFinite(t)&&F(Math.min(4,Math.max(1,Math.round(t))))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"})]}),(0,t.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:"Aspect ratio"}),(0,t.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,t.jsx)("input",{type:"number",min:.1,step:.1,value:T,onChange:e=>{let t=Number(e.target.value);Number.isFinite(t)&&U(Math.max(.1,t))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"/"}),(0,t.jsx)("input",{type:"number",min:.1,step:.1,value:$,onChange:e=>{let t=Number(e.target.value);Number.isFinite(t)&&O(Math.max(.1,t))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"})]}),(0,t.jsxs)("span",{className:"text-[11px] text-muted-foreground",children:["Computed ratio: ",Y.toFixed(3)]})]})]})]}),(0,t.jsx)(v,{title:"Item Detail",description:"Full item view when a card is opened.",options:f,selected:V,onSelect:L}),(0,t.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",children:"Pricing"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Currency label and formatting for item prices."}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,t.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Default currency",(0,t.jsx)("input",{type:"text",value:_,onChange:e=>B(e.target.value),className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground",placeholder:"USD"})]}),(0,t.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Currency label",(0,t.jsx)("input",{type:"text",value:z,onChange:e=>A(e.target.value),className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground",placeholder:"$"})]}),(0,t.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Label position",(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["prefix","suffix"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>Q(e),className:["rounded-md border px-3 py-2 text-sm",J===e?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:"prefix"===e?"Label first":"Label last"},e))})]}),(0,t.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Thousand separator",(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[",","."," "].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>I(e),className:["rounded-md border px-3 py-2 text-sm",H===e?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:" "===e?"Space":e},e))})]}),(0,t.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Decimal separator",(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[".",","].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>K(e),className:["rounded-md border px-3 py-2 text-sm",q===e?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:e},e))})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,t.jsx)("input",{type:"checkbox",checked:E,onChange:e=>G(e.target.checked),className:"h-4 w-4 rounded border-border text-foreground"}),"Show decimals"]})]})]}),(0,t.jsx)(v,{title:"Navigation",description:"Category navigation style.",options:j,selected:D,onSelect:P})]}),(0,t.jsxs)("section",{className:"rounded-xl border bg-background p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",children:"Preview"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Live catalog snapshot"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{type:"button",onClick:er,disabled:W,children:W?"Saving...":"Save"}),(0,t.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsxs)(a.default,{href:et,target:"_blank",rel:"noreferrer",children:["Preview",(0,t.jsx)(s,{className:"size-4"})]})}),(0,t.jsx)("span",{className:"rounded-full border border-border px-3 py-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:"Draft"})]})]}),(0,t.jsx)(o,{catalogSlug:d,layoutOverrides:Z,currencyOverrides:ee})]})]})}function v({title:e,description:r,options:a,selected:s,onSelect:d}){return(0,t.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold",children:e}),(0,t.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:r}),(0,t.jsx)("div",{className:"mt-4 grid gap-2",children:a.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>d(e.value),className:["flex items-center justify-between rounded-md border px-3 py-2 text-left text-sm",e.value===s?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:[(0,t.jsx)("span",{children:e.label}),e.value===s?(0,t.jsx)("span",{className:"rounded-full bg-background/10 px-2 py-0.5 text-[10px] uppercase tracking-wide",children:"Selected"}):(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Preview"})]},e.value))})]})}e.s(["CatalogBuilderPanel",()=>f],16925)}]);