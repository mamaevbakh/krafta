{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.1.2_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/client/components/http-access-fallback/http-access-fallback.ts","../../../../../../node_modules/.pnpm/next%4016.1.2_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/client/components/redirect-status-code.ts","../../../../../../node_modules/.pnpm/next%4016.1.2_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/client/components/redirect-error.ts","../../../../../../node_modules/.pnpm/next%4016.1.2_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/client/components/is-next-router-error.ts","../../../../../../apps/krafta/lib/dashboard/catalogs.ts","../../../../../../apps/krafta/components/dashboard/dashboard-navbar.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/krafta/app/dashboard/%5BorgSlug%5D/%5BcatalogSlug%5D/layout.tsx"],"sourcesContent":["export const HTTPAccessErrorStatus = {\n  NOT_FOUND: 404,\n  FORBIDDEN: 403,\n  UNAUTHORIZED: 401,\n}\n\nconst ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatus))\n\nexport const HTTP_ERROR_FALLBACK_ERROR_CODE = 'NEXT_HTTP_ERROR_FALLBACK'\n\nexport type HTTPAccessFallbackError = Error & {\n  digest: `${typeof HTTP_ERROR_FALLBACK_ERROR_CODE};${string}`\n}\n\n/**\n * Checks an error to determine if it's an error generated by\n * the HTTP navigation APIs `notFound()`, `forbidden()` or `unauthorized()`.\n *\n * @param error the error that may reference a HTTP access error\n * @returns true if the error is a HTTP access error\n */\nexport function isHTTPAccessFallbackError(\n  error: unknown\n): error is HTTPAccessFallbackError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n  const [prefix, httpStatus] = error.digest.split(';')\n\n  return (\n    prefix === HTTP_ERROR_FALLBACK_ERROR_CODE &&\n    ALLOWED_CODES.has(Number(httpStatus))\n  )\n}\n\nexport function getAccessFallbackHTTPStatus(\n  error: HTTPAccessFallbackError\n): number {\n  const httpStatus = error.digest.split(';')[1]\n  return Number(httpStatus)\n}\n\nexport function getAccessFallbackErrorTypeByStatus(\n  status: number\n): 'not-found' | 'forbidden' | 'unauthorized' | undefined {\n  switch (status) {\n    case 401:\n      return 'unauthorized'\n    case 403:\n      return 'forbidden'\n    case 404:\n      return 'not-found'\n    default:\n      return\n  }\n}\n","export enum RedirectStatusCode {\n  SeeOther = 303,\n  TemporaryRedirect = 307,\n  PermanentRedirect = 308,\n}\n","import { RedirectStatusCode } from './redirect-status-code'\n\nexport const REDIRECT_ERROR_CODE = 'NEXT_REDIRECT'\n\nexport enum RedirectType {\n  push = 'push',\n  replace = 'replace',\n}\n\nexport type RedirectError = Error & {\n  digest: `${typeof REDIRECT_ERROR_CODE};${RedirectType};${string};${RedirectStatusCode};`\n}\n\n/**\n * Checks an error to determine if it's an error generated by the\n * `redirect(url)` helper.\n *\n * @param error the error that may reference a redirect error\n * @returns true if the error is a redirect error\n */\nexport function isRedirectError(error: unknown): error is RedirectError {\n  if (\n    typeof error !== 'object' ||\n    error === null ||\n    !('digest' in error) ||\n    typeof error.digest !== 'string'\n  ) {\n    return false\n  }\n\n  const digest = error.digest.split(';')\n  const [errorCode, type] = digest\n  const destination = digest.slice(2, -2).join(';')\n  const status = digest.at(-2)\n\n  const statusCode = Number(status)\n\n  return (\n    errorCode === REDIRECT_ERROR_CODE &&\n    (type === 'replace' || type === 'push') &&\n    typeof destination === 'string' &&\n    !isNaN(statusCode) &&\n    statusCode in RedirectStatusCode\n  )\n}\n","import {\n  isHTTPAccessFallbackError,\n  type HTTPAccessFallbackError,\n} from './http-access-fallback/http-access-fallback'\nimport { isRedirectError, type RedirectError } from './redirect-error'\n\n/**\n * Returns true if the error is a navigation signal error. These errors are\n * thrown by user code to perform navigation operations and interrupt the React\n * render.\n */\nexport function isNextRouterError(\n  error: unknown\n): error is RedirectError | HTTPAccessFallbackError {\n  return isRedirectError(error) || isHTTPAccessFallbackError(error)\n}\n","import { createServerClient } from \"@supabase/ssr\";\nimport { cacheLife } from \"next/cache\";\nimport type { Tables, Database } from \"@/lib/supabase/types\";\n\nexport type CatalogSummary = Pick<Tables<\"catalogs\">, \"id\" | \"name\" | \"slug\">;\nexport type CookieSnapshot = Array<{ name: string; value: string }>;\n\nexport async function getOrgCatalogSummaries(\n  orgSlug: string,\n  cookieSnapshot: CookieSnapshot = [],\n): Promise<CatalogSummary[]> {\n  \"use cache\";\n  cacheLife(\"hours\");\n\n  const supabase = createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieSnapshot;\n        },\n        setAll() {\n        },\n      },\n    },\n  );\n\n  const { data, error } = await supabase\n    .from(\"catalogs\")\n    .select(\"id, name, slug, org_id, organizations!inner(slug)\")\n    .eq(\"organizations.slug\", orgSlug)\n    .order(\"created_at\", { ascending: true });\n\n  if (error) {\n    return [];\n  }\n\n  return (data ?? []).map(({ id, name, slug }) => ({ id, name, slug }));\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardNavbar = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardNavbar() from the server but DashboardNavbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/krafta/components/dashboard/dashboard-navbar.tsx\",\n    \"DashboardNavbar\",\n);\n","import { Suspense } from \"react\";\nimport type { ReactNode } from \"react\";\nimport { cookies } from \"next/headers\";\nimport { DashboardNavbar } from \"@/components/dashboard/dashboard-navbar\";\nimport {\n  getOrgCatalogSummaries,\n  type CatalogSummary,\n  type CookieSnapshot,\n} from \"@/lib/dashboard/catalogs\";\n\ntype CatalogLayoutProps = {\n  children: ReactNode;\n  params: Promise<{ orgSlug: string; catalogSlug: string }>;\n};\n\nexport default function CatalogLayout(props: CatalogLayoutProps) {\n  return (\n    <Suspense fallback={<CatalogLayoutFallback />}>\n      <CatalogLayoutContent {...props} />\n    </Suspense>\n  );\n}\n\nasync function CatalogLayoutContent({ children, params }: CatalogLayoutProps) {\n  const { orgSlug, catalogSlug } = await params;\n  const cookieStore = await cookies();\n  const cookieSnapshot: CookieSnapshot = cookieStore\n    .getAll()\n    .map(({ name, value }) => ({ name, value }));\n  const catalogs: CatalogSummary[] = await getOrgCatalogSummaries(\n    orgSlug,\n    cookieSnapshot,\n  );\n\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <DashboardNavbar\n        orgSlug={orgSlug}\n        catalogSlug={catalogSlug}\n        catalogs={catalogs}\n      />\n      <main className=\"flex-1 bg-secondary-background\">{children}</main>\n    </div>\n  );\n}\n\nfunction CatalogLayoutFallback() {\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <div className=\"h-16 w-full animate-pulse bg-muted\" />\n      <main className=\"flex-1 bg-secondary-background\" />\n    </div>\n  );\n}\n"],"names":["HTTPAccessErrorStatus","HTTP_ERROR_FALLBACK_ERROR_CODE","getAccessFallbackErrorTypeByStatus","getAccessFallbackHTTPStatus","isHTTPAccessFallbackError","NOT_FOUND","FORBIDDEN","UNAUTHORIZED","ALLOWED_CODES","Set","Object","values","error","digest","prefix","httpStatus","split","has","Number","status","RedirectStatusCode","REDIRECT_ERROR_CODE","RedirectType","isRedirectError","errorCode","type","destination","slice","join","at","statusCode","isNaN","isNextRouterError"],"mappings":"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","ignoreList":[0,1,2,3,5]}