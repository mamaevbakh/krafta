module.exports=[17584,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(73255),g=a.r(7931),h=a.r(65e3)},64954,a=>{"use strict";var b=a.i(17091),c=a.i(76111),d=a.i(51436);let e=(0,a.i(72873).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),f=[{id:"desktop",label:"Desktop",width:"100%",height:780},{id:"tablet",label:"Tablet",width:820,height:1180},{id:"mobile",label:"Mobile",width:390,height:844},{id:"square",label:"Square",width:800,height:800}];function g({catalogSlug:a,layoutOverrides:d,currencyOverrides:e}){let[g,h]=(0,c.useState)("desktop"),i=(0,c.useMemo)(()=>f.find(a=>a.id===g),[g]),j=i?.width??f[0].width,k=i?.height??f[0].height,l={width:"number"==typeof j?`${j}px`:j,height:`${k}px`},m=(0,c.useMemo)(()=>{let b=new URLSearchParams;return b.set("preview","1"),d?.headerVariant&&b.set("header",d.headerVariant),d?.sectionVariant&&b.set("section",d.sectionVariant),d?.itemCardVariant&&b.set("card",d.itemCardVariant),d?.categoryNavVariant&&b.set("nav",d.categoryNavVariant),d?.itemDetailVariant&&b.set("detail",d.itemDetailVariant),d?.itemCard?.columns&&b.set("cols",String(d.itemCard.columns)),d?.itemCard?.aspectRatio&&b.set("ratio",String(d.itemCard.aspectRatio)),e&&(b.set("cur",e.defaultCurrency),b.set("curLabel",e.label),b.set("curThousand",e.thousandSeparator),b.set("curDecimal",e.decimalSeparator),b.set("curDecimals",e.showDecimals?"1":"0"),b.set("curPos",e.labelPosition)),`/preview/${a}?${b.toString()}`},[a,d,e]);return(0,b.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[f.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>h(a.id),className:["rounded-full border px-3 py-1 text-xs transition",g===a.id?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground hover:text-foreground"].join(" "),children:a.label},a.id)),(0,b.jsxs)("span",{className:"ml-auto text-xs text-muted-foreground",children:["number"==typeof j?`${j}px`:j," Ã— ",k,"px"]})]}),(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border bg-secondary-background/40 p-4",children:(0,b.jsx)("div",{className:"w-full overflow-auto",children:(0,b.jsx)("div",{className:"mx-auto overflow-hidden rounded-lg border border-border bg-background shadow-sm",style:l,children:(0,b.jsx)("iframe",{title:"Catalog preview",src:m,className:"h-full w-full",loading:"lazy",sandbox:"allow-same-origin allow-scripts allow-forms"})})})})]})}var h=a.i(47537),i=a.i(37258);a.i(40483);let j=!1;async function k(){j||(j=!0)}async function l(a=40){await k()}async function m(){await l(70)}async function n(){await l(90)}var o=a.i(17584);let p=(0,o.createServerReference)("40f004e0f0cb0bd60f0648085f8ad2f288c4e6b215",o.callServer,void 0,o.findSourceMapURL,"saveCatalogLayout"),q=[{width:1,height:1},{width:4,height:3},{width:3,height:4},{width:16,height:9},{width:9,height:16}];function r({catalogId:a,catalogSlug:f,initialLayout:j,initialCurrency:k,headerOptions:l,sectionOptions:o,itemCardOptions:r,itemDetailOptions:t,navOptions:u}){let v=(0,c.useMemo)(()=>(function(a){let b=Number.isFinite(a)&&a>0?a:1,c=q[0],d=1/0;for(let a of q){let e=Math.abs(a.width/a.height-b);e<d&&(d=e,c=a)}return d<=.02?c:{width:Number(b.toFixed(2)),height:1}})(j.itemCard.aspectRatio),[j.itemCard.aspectRatio]),[w,x]=(0,c.useState)(j.headerVariant),[y,z]=(0,c.useState)(j.sectionVariant),[A,B]=(0,c.useState)(j.itemCardVariant),[C,D]=(0,c.useState)(j.categoryNavVariant),[E,F]=(0,c.useState)(j.itemDetailVariant),[G,H]=(0,c.useState)(j.itemCard.columns),[I,J]=(0,c.useState)(v.width),[K,L]=(0,c.useState)(v.height),[M,N]=(0,c.useState)(k.defaultCurrency),[O,P]=(0,c.useState)(k.label),[Q,R]=(0,c.useState)(k.thousandSeparator),[S,T]=(0,c.useState)(k.decimalSeparator),[U,V]=(0,c.useState)(k.showDecimals),[W,X]=(0,c.useState)(k.labelPosition),[Y,Z]=(0,c.useState)(!1),$=(0,c.useMemo)(()=>(Number.isFinite(I)&&I>0?I:1)/(Number.isFinite(K)&&K>0?K:1),[I,K]),_=(0,c.useMemo)(()=>({headerVariant:w,sectionVariant:y,itemCardVariant:A,categoryNavVariant:C,itemDetailVariant:E,itemCard:{columns:G,aspectRatio:$}}),[w,y,A,C,E,G,$]),aa=(0,c.useMemo)(()=>({defaultCurrency:M,label:O,thousandSeparator:Q,decimalSeparator:S,showDecimals:U,labelPosition:W}),[M,O,Q,S,U,W]),ab=(0,c.useMemo)(()=>{let a=new URLSearchParams;return a.set("preview","1"),a.set("header",w),a.set("section",y),a.set("card",A),a.set("nav",C),a.set("detail",E),a.set("cols",String(G)),a.set("ratio",String($)),a.set("cur",M),a.set("curLabel",O),a.set("curThousand",Q),a.set("curDecimal",S),a.set("curDecimals",U?"1":"0"),a.set("curPos",W),`/preview/${f}?${a.toString()}`},[f,w,y,A,C,E,G,$,M,O,Q,S,U,W]),ac=async()=>{if(Y)return;Z(!0);let b={...j,headerVariant:w,sectionVariant:y,itemCardVariant:A,categoryNavVariant:C,itemDetailVariant:E,itemCard:{columns:G,aspectRatio:$}},c={...k,defaultCurrency:M,label:O,thousandSeparator:Q,decimalSeparator:S,showDecimals:U,labelPosition:W},d=await p({catalogId:a,catalogSlug:f,settingsLayout:b,settingsCurrency:c});d.ok?(i.toast.success("Layout saved"),m()):(i.toast.error("Failed to save layout",{description:d.error??"Unknown error"}),n()),Z(!1)};return(0,b.jsxs)("div",{className:"mt-8 grid gap-6 lg:grid-cols-[380px_1fr]",children:[(0,b.jsxs)("aside",{className:"space-y-6",children:[(0,b.jsx)(s,{title:"Headers",description:"Top branding and catalog identity.",options:l,selected:w,onSelect:x}),(0,b.jsx)(s,{title:"Sections",description:"Category grouping and spacing.",options:o,selected:y,onSelect:z}),(0,b.jsx)(s,{title:"Item Cards",description:"How each item is rendered.",options:r,selected:A,onSelect:B}),(0,b.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:"Item Card Layout"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Columns and image aspect ratio."}),(0,b.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,b.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Columns",(0,b.jsx)("input",{type:"number",min:1,max:4,step:1,value:G,onChange:a=>{let b=Number(a.target.value);Number.isFinite(b)&&H(Math.min(4,Math.max(1,Math.round(b))))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"})]}),(0,b.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"Aspect ratio"}),(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:.1,step:.1,value:I,onChange:a=>{let b=Number(a.target.value);Number.isFinite(b)&&J(Math.max(.1,b))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"/"}),(0,b.jsx)("input",{type:"number",min:.1,step:.1,value:K,onChange:a=>{let b=Number(a.target.value);Number.isFinite(b)&&L(Math.max(.1,b))},className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground"})]}),(0,b.jsxs)("span",{className:"text-[11px] text-muted-foreground",children:["Computed ratio: ",$.toFixed(3)]})]})]})]}),(0,b.jsx)(s,{title:"Item Detail",description:"Full item view when a card is opened.",options:t,selected:E,onSelect:F}),(0,b.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:"Pricing"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Currency label and formatting for item prices."}),(0,b.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,b.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Default currency",(0,b.jsx)("input",{type:"text",value:M,onChange:a=>N(a.target.value),className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground",placeholder:"USD"})]}),(0,b.jsxs)("label",{className:"grid gap-2 text-xs text-muted-foreground",children:["Currency label",(0,b.jsx)("input",{type:"text",value:O,onChange:a=>P(a.target.value),className:"rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground",placeholder:"$"})]}),(0,b.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Label position",(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["prefix","suffix"].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>X(a),className:["rounded-md border px-3 py-2 text-sm",W===a?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:"prefix"===a?"Label first":"Label last"},a))})]}),(0,b.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Thousand separator",(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[",","."," "].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>R(a),className:["rounded-md border px-3 py-2 text-sm",Q===a?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:" "===a?"Space":a},a))})]}),(0,b.jsxs)("div",{className:"grid gap-2 text-xs text-muted-foreground",children:["Decimal separator",(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[".",","].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>T(a),className:["rounded-md border px-3 py-2 text-sm",S===a?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:a},a))})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,b.jsx)("input",{type:"checkbox",checked:U,onChange:a=>V(a.target.checked),className:"h-4 w-4 rounded border-border text-foreground"}),"Show decimals"]})]})]}),(0,b.jsx)(s,{title:"Navigation",description:"Category navigation style.",options:u,selected:C,onSelect:D})]}),(0,b.jsxs)("section",{className:"rounded-xl border bg-background p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:"Preview"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Live catalog snapshot"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Button,{type:"button",onClick:ac,disabled:Y,children:Y?"Saving...":"Save"}),(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsxs)(d.default,{href:ab,target:"_blank",rel:"noreferrer",children:["Preview",(0,b.jsx)(e,{className:"size-4"})]})}),(0,b.jsx)("span",{className:"rounded-full border border-border px-3 py-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:"Draft"})]})]}),(0,b.jsx)(g,{catalogSlug:f,layoutOverrides:_,currencyOverrides:aa})]})]})}function s({title:a,description:c,options:d,selected:e,onSelect:f}){return(0,b.jsxs)("section",{className:"rounded-lg border bg-background p-4",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold",children:a}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:c}),(0,b.jsx)("div",{className:"mt-4 grid gap-2",children:d.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>f(a.value),className:["flex items-center justify-between rounded-md border px-3 py-2 text-left text-sm",a.value===e?"border-foreground bg-foreground text-background":"border-border text-foreground hover:border-foreground"].join(" "),children:[(0,b.jsx)("span",{children:a.label}),a.value===e?(0,b.jsx)("span",{className:"rounded-full bg-background/10 px-2 py-0.5 text-[10px] uppercase tracking-wide",children:"Selected"}):(0,b.jsx)("span",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Preview"})]},a.value))})]})}a.s(["CatalogBuilderPanel",()=>r],64954)}];

//# sourceMappingURL=_1aeeb778._.js.map