module.exports=[89688,a=>{"use strict";var b=a.i(89288),c=a.i(73756),d=a.i(26739),e=a.i(24891);let f="https://hlmcoirjaydrfqcmnuun.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsbWNvaXJqYXlkcmZxY21udXVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0MDk1MjIsImV4cCI6MjA3ODk4NTUyMn0.3glVrGoHeRn44RrTR1JVZ0AFuhA8nbsWZnd7pl3MDqU",h={apikey:g,Authorization:`Bearer ${g}`},i=async function(a){(0,e.cacheTag)(`catalog:${a}`,"catalogs");let b=`${f}/rest/v1/catalogs?slug=eq.${encodeURIComponent(a)}&select=*`,c=await fetch(b,{headers:h,next:{tags:[`catalog:${a}`,"catalogs"]},cache:"force-cache"});if(!c.ok)return null;let d=(await c.json())[0]??null;return d?.id&&(0,e.cacheTag)(`catalog:${d.id}`),d};var j=(0,d.cache)(function(){return(0,c.cache)("default","c0611dc6a5681bb4412dfda78e34745b9a6ae84010",0,i,arguments)});(0,b.registerServerReference)(j,"c0611dc6a5681bb4412dfda78e34745b9a6ae84010",null),Object.defineProperty(j,"name",{value:"getCatalogBySlug"});let k=async function(a){(0,e.cacheTag)(`catalog:${a}`,`catalog-structure:${a}`);let b=`${f}/rest/v1/catalog_categories?catalog_id=eq.${encodeURIComponent(a)}&is_active=eq.true&select=*&order=position.asc`,c=`${f}/rest/v1/items?catalog_id=eq.${encodeURIComponent(a)}&is_active=eq.true&select=*&order=position.asc`,[d,g]=await Promise.all([fetch(b,{headers:h,next:{tags:[`catalog:${a}`,`catalog-structure:${a}`]},cache:"force-cache"}),fetch(c,{headers:h,next:{tags:[`catalog:${a}`,`catalog-structure:${a}`]},cache:"force-cache"})]);if(!d.ok)return[];let i=await d.json();if(!g.ok)return i.map(a=>({...a,items:[]}));let j=await g.json(),k=new Map;for(let a of j){let b=k.get(a.category_id)??[];b.push(a),k.set(a.category_id,b)}return i.map(a=>({...a,items:k.get(a.id)??[]}))};var l=(0,d.cache)(function(){return(0,c.cache)("default","c09c6fb5a83fb2f73507c066d40fb710f559db9b35",0,k,arguments)});(0,b.registerServerReference)(l,"c09c6fb5a83fb2f73507c066d40fb710f559db9b35",null),Object.defineProperty(l,"name",{value:"getCatalogStructure"}),a.s(["$$RSC_SERVER_CACHE_0",()=>j,"$$RSC_SERVER_CACHE_1",()=>l,"getCatalogBySlug",()=>j,"getCatalogStructure",()=>l])},86151,a=>{"use strict";a.i(19817);var b=a.i(45287),c=a.i(52372);async function d(){let a=await (0,c.cookies)();return(0,b.createServerClient)("https://hlmcoirjaydrfqcmnuun.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhsbWNvaXJqYXlkcmZxY21udXVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0MDk1MjIsImV4cCI6MjA3ODk4NTUyMn0.3glVrGoHeRn44RrTR1JVZ0AFuhA8nbsWZnd7pl3MDqU",{cookies:{getAll:()=>a.getAll(),setAll(b){try{b.forEach(({name:b,value:c,options:d})=>a.set(b,c,d))}catch{}}}})}a.s(["createClient",()=>d])},28173,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},13519,a=>{"use strict";var b=a.i(58376),c=a.i(89288),d=a.i(24891),e=a.i(28173);async function f(a){(0,d.updateTag)(`catalog:${a.catalogId}`),(0,d.updateTag)(`catalog-structure:${a.catalogId}`),(0,d.updateTag)("catalogs"),a.catalogSlug&&(0,d.updateTag)(`catalog:${a.catalogSlug}`)}async function g(a){(0,d.revalidateTag)(`catalog:${a}`,"max"),(0,d.revalidateTag)(`catalog-structure:${a}`,"max")}async function h(a){(0,d.revalidateTag)(`catalog:${a}`,"max")}(0,e.ensureServerEntryExports)([f,g,h]),(0,c.registerServerReference)(f,"404d7949ea1905fcc2c0b4ce8faf7f894bf2d76367",null),(0,c.registerServerReference)(g,"40479a1d1a245be8cc17cfde506ff2a47f6e99abc7",null),(0,c.registerServerReference)(h,"402e2ee584c413f63c00c8162373040e9e8d2622b1",null);var i=a.i(86151);async function j(a){let b=await (0,i.createClient)(),{error:c}=await b.from("catalogs").update({settings_layout:a.settingsLayout,settings_currency:a.settingsCurrency}).eq("id",a.catalogId);return c?{ok:!1,error:c.message}:(await f({catalogId:a.catalogId,catalogSlug:a.catalogSlug}),{ok:!0})}(0,e.ensureServerEntryExports)([j]),(0,c.registerServerReference)(j,"40f004e0f0cb0bd60f0648085f8ad2f288c4e6b215",null);var k=a.i(89688);a.s([],84741),a.i(84741),a.s(["40f004e0f0cb0bd60f0648085f8ad2f288c4e6b215",()=>j,"c0611dc6a5681bb4412dfda78e34745b9a6ae84010",()=>k.$$RSC_SERVER_CACHE_0,"c09c6fb5a83fb2f73507c066d40fb710f559db9b35",()=>k.$$RSC_SERVER_CACHE_1,"e002568b17f807f12d4e53a46203b4c7c130a15e5e",()=>b.$$RSC_SERVER_CACHE_0],13519)}];

//# sourceMappingURL=_abfa8e00._.js.map